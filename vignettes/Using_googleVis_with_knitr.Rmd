---
title: "Markdown example with knitr and googleVis"
date: "`r Sys.Date()`"
output:
  html_document:
    self_contained: false
---

<!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{Markdown example with knitr and googleVis}
-->

This is a little Markdown example output. The Markdown source file is hosted on [GitHub](https://github.com/mages/googleVis/blob/master/vignettes/Using_googleVis_with_knitr.Rmd).

In the YAML header of your Rmarkdown file set the output option to:

```
  output:
  html_document:
    self_contained: false
```

Next, change googleVis option of `plot.gvis`, so that only the chart component of the HTML file is written into the output file:

```{r setOptions, message=FALSE}
library(googleVis)
op <- options(gvis.plot.tag='chart')
```

The following plot statements will automatically return the HTML
required for the 'knitted' output. 

## Combo chart
```{r ComboExample, results='asis', tidy=FALSE}
## Add the mean
CityPopularity$Mean=mean(CityPopularity$Popularity)
CC <- gvisComboChart(CityPopularity, xvar='City',
          yvar=c('Mean', 'Popularity'),
          options=list(seriesType='bars',
                       width=450, height=300,
                       title='City Popularity',
                       series='{0: {type:\"line\"}}'))
plot(CC)
```

Example of gvisComboChart with R code shown above.

## Place two charts next to each other
```{r gvisMergeExample, results='asis', echo=FALSE}
Geo <- gvisGeoChart(Exports, locationvar='Country', colorvar='Profit', 
                    options=list(height=300, width=350)) 
Tbl <- gvisTable(Exports, options=list(height=300, width=200))
plot(gvisMerge(Geo, Tbl, horizontal=TRUE))
```

Example of a gvisGeoChart with gvisTable and R code hidden.

See the googleVis package vignette for more details. 

```{r resetOptions}
## Set options back to original options
options(op)
```
